type = "javascript"
name = "abogado-wilson-website"
main = "workers-site/index.js"
compatibility_date = "2025-03-24"
account_id = "your_account_id"
workers_dev = true

[build]
	command = "npm run build"
	watch_dir = "src"

[limits]
memory_mb = 128
max_upload_size = "10MB"
cpu_ms = 1000

[env.production]
routes = [
  { pattern = "api.abogadowilson.com/*", custom_domain = true }
]
[env.production.vars]
ENVIRONMENT = "production"
ALLOWED_ORIGINS = "https://example.com"
JWT_SECRET = "supersecret"
SUPABASE_URL = "https://supabase.example.com"
TURSO_DB_URL = "https://turso.example.com"

kv_namespaces = [
  { binding = "SESSIONS", id = "prod-kv-sessions-id" },
  { binding = "KV_AUTH", id = "auth-store", preview_id = "auth-store-preview" },
  { binding = "EBOOKS", id = "prod-kv-ebooks-id" }
]
r2_buckets = [
  { binding = "EBOOKS_BUCKET", bucket_name = "ebooks", preview_bucket_name = "ebooks-dev" }
]

[triggers]
crons = ["0 0 * * *"]

[placement]
mode = "smart"
