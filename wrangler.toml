type = "javascript"
name = "abogado-wilson-website"
main = "src/worker.ts"
compatibility_date = "2024-02-14"
account_id = "your_account_id"
workers_dev = true

[dev]
port = 3000
local_protocol = "http"

[build]
command = "npm run build"
watch_dir = "src"

[site]
bucket = "./dist"
entry-point = "src/worker.ts"

[limits]
memory_mb = 128
max_upload_size = "10MB"
cpu_ms = 1000

[env.production]
routes = [
  { pattern = "api.abogadowilson.com/*", custom_domain = true }
]
[env.production.vars]
ENVIRONMENT = "production"
ALLOWED_ORIGINS = "https://example.com"
JWT_SECRET = "supersecret"
SUPABASE_URL = "https://supabase.example.com"
TURSO_DB_URL = "https://turso.example.com"
kv_namespaces = [
  { binding = "ASSETS", id = "your-kv-namespace-id" }
]
r2_buckets = [
  { binding = "EBOOKS_BUCKET", bucket_name = "ebooks", preview_bucket_name = "ebooks-dev" }
]

[triggers]
crons = ["0 0 * * *"] # Daily maintenance

[placement]
mode = "smart"

[vars]
CORS_ORIGIN = "*"
ENVIRONMENT = "production"

[[d1_databases]]
binding = "DB"
database_name = "abogado-wilson-db"
database_id = "your-d1-database-id"

[miniflare]
kv_persist = true
cache_persist = true
